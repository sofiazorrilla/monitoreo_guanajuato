View(joined_errrores)
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"508|17"),"17",individuo))
joined_errrores <- joined %>% filter(str_detect(individuo, "="))
joined_errores <- joined_errrores %>% mutate(individuo = ifelse(str_detect(individuo,"508|17"),"17",individuo))
joined_errores <- joined %>% filter(str_detect(individuo, "="))
joined_errores <- joined %>% filter(str_detect(individuo, "="))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"508|17"),"17",individuo))
View(joined_errores)
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"360|411"),"360",individuo))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"657|406"),"406",individuo))
library(tidyverse)
files <- list.files("datos", pattern = ".csv", full.names = T)
zon_files <- files [str_detect(files, "zongolica")]
list <- list()
for (i in 1:length(zon_files)){
if (str_detect(zon_files[i],"2022")){
list[[i]] <- read.csv(zon_files[[i]], header = F)[,-1]
} else {
list[[i]] <- read.csv(zon_files[[i]], header = F)
}
list[[i]] <- list[[i]][-1,]
colnames(list[[i]]) <- tolower(c("Estado","Localidad" ,"Año","Individuo","Categoria","Base","DAP","Altura","Estatus"))
list[[i]] <-  list[[i]][, c("estado", "localidad", "año", "individuo", "categoria", "base", "dap", "altura", "estatus")]
}
list[[4]]
joined <- do.call(rbind,list)
joined <-  mutate(joined, altura=as.numeric(altura))
joined_filtrado <- joined %>% filter(!str_detect(individuo, "="))
joined_filtrado  <- joined_filtrado %>% mutate(individuo = str_replace_all(individuo, "ZON", ""))%>%
mutate(individuo = if_else(!str_detect(individuo, "^ZON"),
if_else(as.numeric(individuo) < 100, paste0("0", individuo), individuo),
individuo))
library(tidyverse)
files <- list.files("datos", pattern = ".csv", full.names = T)
zon_files <- files [str_detect(files, "zongolica")]
list <- list()
for (i in 1:length(zon_files)){
if (str_detect(zon_files[i],"2022")){
list[[i]] <- read.csv(zon_files[[i]], header = F)[,-1]
} else {
list[[i]] <- read.csv(zon_files[[i]], header = F)
}
list[[i]] <- list[[i]][-1,]
colnames(list[[i]]) <- tolower(c("Estado","Localidad" ,"Año","Individuo","Categoria","Base","DAP","Altura","Estatus"))
list[[i]] <-  list[[i]][, c("estado", "localidad", "año", "individuo", "categoria", "base", "dap", "altura", "estatus")]
}
list[[4]]
joined <- do.call(rbind,list)
joined <-  mutate(joined, altura=as.numeric(altura))
joined_filtrado <- joined %>% filter(!str_detect(individuo, "="))
joined_filtrado  <- joined_filtrado %>% mutate(individuo = str_replace_all(individuo, "ZON", ""))%>%
mutate(individuo = if_else(!str_detect(individuo, "^ZON"),
if_else(as.numeric(individuo) < 100, paste0("0", individuo), individuo),
individuo))
joined_errores <- joined %>% filter(str_detect(individuo, "="))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"508|17"),"17",individuo))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"360|411"),"360",individuo))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"657|406"),"406",individuo))
View(joined_errores)
joined_errores <- unique(joined_errores)
View(joined_errores)
library(tidyr)
library(dplyr)
library(stringi)
library(stringr)
library(tidyverse)
files <- list.files("datos", pattern = ".csv", full.names = T)
zon_files <- files [str_detect(files, "zongolica")]
list <- list()
for (i in 1:length(zon_files)){
if (str_detect(zon_files[i],"2022")){
list[[i]] <- read.csv(zon_files[[i]], header = F)[,-1]
} else {
list[[i]] <- read.csv(zon_files[[i]], header = F)
}
list[[i]] <- list[[i]][-1,]
colnames(list[[i]]) <- tolower(c("Estado","Localidad" ,"Año","Individuo","Categoria","Base","DAP","Altura","Estatus"))
list[[i]] <-  list[[i]][, c("estado", "localidad", "año", "individuo", "categoria", "base", "dap", "altura", "estatus")]
}
list[[4]]
joined <- do.call(rbind,list)
joined <-  mutate(joined, altura=as.numeric(altura))
joined_filtrado <- joined %>% filter(!str_detect(individuo, "="))
library(tidyr)
library(dplyr)
library(stringi)
library(stringr)
library(tidyverse)
files <- list.files("datos", pattern = ".csv", full.names = T)
zon_files <- files [str_detect(files, "zongolica")]
list <- list()
for (i in 1:length(zon_files)){
if (str_detect(zon_files[i],"2022")){
list[[i]] <- read.csv(zon_files[[i]], header = F)[,-1]
} else {
list[[i]] <- read.csv(zon_files[[i]], header = F)
}
list[[i]] <- list[[i]][-1,]
colnames(list[[i]]) <- tolower(c("Estado","Localidad" ,"Año","Individuo","Categoria","Base","DAP","Altura","Estatus"))
list[[i]] <-  list[[i]][, c("estado", "localidad", "año", "individuo", "categoria", "base", "dap", "altura", "estatus")]
}
list[[4]]
joined <- do.call(rbind,list)
joined <-  mutate(joined, altura=as.numeric(altura))
joined_errores <- joined %>% filter(str_detect(individuo, "="))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"508|17"),"17",individuo))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"360|411"),"360",individuo))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"657|406"),"406",individuo))
joined_errores <- unique(joined_errores)
joined <- merge(joined, joined_errores)
joined <- rbind(joined, joined_errores)
joined <- do.call(rbind,list)
joined <-  mutate(joined, altura=as.numeric(altura))
joined_errores <- unique(joined_errores)
joined <- rbind(joined, joined_errores)
View(joined)
joined <- joined %>% mutate(individuo = str_replace_all(individuo, "ZON", ""))%>%
mutate(individuo = if_else(!str_detect(individuo, "^ZON"),
if_else(as.numeric(individuo) < 100, paste0("0", individuo), individuo),
individuo))
View(joined)
joined_separados <- joined %>%
separate_rows(individuo, sep = ",") %>%
separate_rows(individuo, sep = "-")
# Verificar el resultado
print(joined_separados)
View(joined_separados)
View(joined_errores)
joined_p <- joined %>% filter(categoria=="P") %>% mutate(altura= as.numeric(altura))
hist(joined_p$altura)
joined_p<- joined_p %>% mutate(altura= ifelse(altura >10, altura/100, altura))
hist(joined_p$altura)
joined_corregido <- joined %>% filter(categoria != "P") %>% bind_rows(joined_p)
hist(joined_corregido$altura)
View(joined_corregido)
zon_alt <- select(joined_corregido, -c(base, dap))
zon_base <- select(joined_corregido, -c(dap,altura))
zon_dap <- select(joined_corregido, -c(base,altura))
library(tidyverse)
files <- list.files("datos", pattern = ".csv", full.names = T)
zon_files <- files [str_detect(files, "zongolica")]
list <- list()
for (i in 1:length(zon_files)){
if (str_detect(zon_files[i],"2022")){
list[[i]] <- read.csv(zon_files[[i]], header = F)[,-1]
} else {
list[[i]] <- read.csv(zon_files[[i]], header = F)
}
list[[i]] <- list[[i]][-1,]
colnames(list[[i]]) <- tolower(c("Estado","Localidad" ,"Año","Individuo","Categoria","Base","DAP","Altura","Estatus"))
list[[i]] <-  list[[i]][, c("estado", "localidad", "año", "individuo", "categoria", "base", "dap", "altura", "estatus")]
}
list[[4]]
joined <- do.call(rbind,list)
joined <-  mutate(joined, altura=as.numeric(altura))
joined_errores <- joined %>% filter(str_detect(individuo, "="))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"508|17"),"17",individuo))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"360|411"),"360",individuo))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"657|406"),"406",individuo))
joined_errores <- unique(joined_errores)
joined <- rbind(joined, joined_errores)
joined <- joined %>% mutate(individuo = str_replace_all(individuo, "ZON", ""))%>%
mutate(individuo = if_else(!str_detect(individuo, "^ZON"),
if_else(as.numeric(individuo) < 100, paste0("0", individuo), individuo),
individuo))
zon_alt <- select(joined, -c(base, dap))
zon_base <- select(joined, -c(dap,altura))
zon_dap <- select(joined, -c(base,altura))
View(zon_alt)
library(tidyverse)
files <- list.files("datos", pattern = ".csv", full.names = T)
zon_files <- files [str_detect(files, "zongolica")]
list <- list()
for (i in 1:length(zon_files)){
if (str_detect(zon_files[i],"2022")){
list[[i]] <- read.csv(zon_files[[i]], header = F)[,-1]
} else {
list[[i]] <- read.csv(zon_files[[i]], header = F)
}
list[[i]] <- list[[i]][-1,]
colnames(list[[i]]) <- tolower(c("Estado","Localidad" ,"Año","Individuo","Categoria","Base","DAP","Altura","Estatus"))
list[[i]] <-  list[[i]][, c("estado", "localidad", "año", "individuo", "categoria", "base", "dap", "altura", "estatus")]
}
list[[4]]
joined <- do.call(rbind,list)
joined <-  mutate(joined, altura=as.numeric(altura))
joined_errores <- joined %>% filter(str_detect(individuo, "="))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"508|17"),"17",individuo))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"360|411"),"360",individuo))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"657|406"),"406",individuo))
joined_errores <- unique(joined_errores)
joined <- rbind(joined, joined_errores)
joined <- joined %>% mutate(individuo = str_replace_all(individuo, "ZON", ""))%>%
mutate(individuo = if_else(!str_detect(individuo, "^ZON"),
if_else(as.numeric(individuo) < 100, paste0("0", individuo), individuo),
individuo))
View(joined)
library(tidyr)
library(dplyr)
library(stringi)
library(stringr)
library(tidyverse)
files <- list.files("datos", pattern = ".csv", full.names = T)
zon_files <- files [str_detect(files, "zongolica")]
list <- list()
for (i in 1:length(zon_files)){
if (str_detect(zon_files[i],"2022")){
list[[i]] <- read.csv(zon_files[[i]], header = F)[,-1]
} else {
list[[i]] <- read.csv(zon_files[[i]], header = F)
}
list[[i]] <- list[[i]][-1,]
colnames(list[[i]]) <- tolower(c("Estado","Localidad" ,"Año","Individuo","Categoria","Base","DAP","Altura","Estatus"))
list[[i]] <-  list[[i]][, c("estado", "localidad", "año", "individuo", "categoria", "base", "dap", "altura", "estatus")]
}
list[[4]]
joined <- do.call(rbind,list)
joined <-  mutate(joined, altura=as.numeric(altura))
joined_errores <- joined %>% filter(str_detect(individuo, "="))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"508|17"),"17",individuo))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"360|411"),"360",individuo))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"657|406"),"406",individuo))
joined_errores <- unique(joined_errores)
joined <- rbind(joined, joined_errores)
joined <- joined %>% mutate(individuo = str_replace_all(individuo, "ZON", ""))%>%
mutate(individuo = if_else(!str_detect(individuo, "^ZON"),
if_else(as.numeric(individuo) < 100, paste0("0", individuo), individuo),
individuo))
zon_alt <- select(joined, -c(base, dap))
zon_base <- select(joined, -c(dap,altura))
zon_dap <- select(joined, -c(base,altura))
View(zon_alt)
View(joined)
View(joined)
library(tidyr)
library(dplyr)
library(stringi)
library(stringr)
library(tidyverse)
files <- list.files("datos", pattern = ".csv", full.names = T)
zon_files <- files [str_detect(files, "zongolica")]
list <- list()
for (i in 1:length(zon_files)){
if (str_detect(zon_files[i],"2022")){
list[[i]] <- read.csv(zon_files[[i]], header = F)[,-1]
} else {
list[[i]] <- read.csv(zon_files[[i]], header = F)
}
list[[i]] <- list[[i]][-1,]
colnames(list[[i]]) <- tolower(c("Estado","Localidad" ,"Año","Individuo","Categoria","Base","DAP","Altura","Estatus"))
list[[i]] <-  list[[i]][, c("estado", "localidad", "año", "individuo", "categoria", "base", "dap", "altura", "estatus")]
}
list[[4]]
library(tidyverse)
files <- list.files("datos", pattern = ".csv", full.names = T)
zon_files <- files [str_detect(files, "zongolica")]
list <- list()
for (i in 1:length(zon_files)){
if (str_detect(zon_files[i],"2022")){
list[[i]] <- read.csv(zon_files[[i]], header = F)[,-1]
} else {
list[[i]] <- read.csv(zon_files[[i]], header = F)
}
list[[i]] <- list[[i]][-1,]
colnames(list[[i]]) <- tolower(c("Estado","Localidad" ,"Año","Individuo","Categoria","Base","DAP","Altura","Estatus"))
list[[i]] <-  list[[i]][, c("estado", "localidad", "año", "individuo", "categoria", "base", "dap", "altura", "estatus")]
}
list[[4]]
joined <- do.call(rbind,list)
joined <-  mutate(joined, altura=as.numeric(altura))
joined_errores <- joined %>% filter(str_detect(individuo, "="))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"508|17"),"17",individuo))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"360|411"),"360",individuo))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"657|406"),"406",individuo))
joined_errores <- unique(joined_errores)
joined <- rbind(joined, joined_errores)
joined <- joined %>% mutate(individuo = str_replace_all(individuo, "ZON", ""))%>%
mutate(individuo = if_else(!str_detect(individuo, "^ZON"),
if_else(as.numeric(individuo) < 100, paste0("0", individuo), individuo),
individuo))
zon_alt <- select(joined, -c(base, dap))
zon_base <- select(joined, -c(dap,altura))
zon_dap <- select(joined, -c(base,altura))
View(zon_alt)
plantulas<- zon_alt %>% filter(categoria=="P") %>% mutate(altura= as.numeric(altura))
hist(joined_p$altura)
hist(plantulas$altura)
View(plantulas)
plantulas<- plantulas %>% mutate(altura= ifelse(altura >10, altura/100, altura))
hist(plantulas$altura)
joined_corregido <- joined %>% filter(categoria != "P") %>% bind_rows(plantulas)
View(joined_corregido)
View(zon_alt)
plantulas<- zon_alt %>% filter(categoria=="P") %>% mutate(altura= as.numeric(altura))
hist(plantulas$altura)
plantulas<- plantulas %>% mutate(altura2= ifelse(altura >10, altura/100, altura))
hist(plantulas$altura)
joined_corregido <- joined %>% filter(categoria != "P") %>% bind_rows(plantulas)
hist(joined_corregido$altura)
View(joined_corregido)
View(plantulas)
plantulas<- zon_alt %>% filter(categoria=="P") %>% mutate(altura= as.numeric(altura))
hist(plantulas$altura)
plantulas<- plantulas %>% mutate(altura= ifelse(altura >10, altura/100, altura))
hist(plantulas$altura)
joined_corregido <- zon_alt %>% filter(categoria != "P") %>% bind_rows(plantulas)
joined_corregido <- zon_alt %>% filter(categoria != "P") %>% bind_rows(plantulas)
View(joined)
joined_corregido <- zon_alt %>% filter(categoria != "P"| is.na(categoria)) %>% bind_rows(plantulas)
View(joined_corregido)
zon_alt <- zon_alt %>% filter(categoria != "P"| is.na(categoria)) %>% bind_rows(plantulas)
hist(joined_corregido$altura)
zon_alt <- zon_alt %>% filter(categoria != "P"| is.na(categoria)) %>% bind_rows(plantulas)
hist(zon_alt$altura)
zon_alt%>%
arrange(individuo, año) %>% group_by(localidad,individuo,año) %>%
mutate(tronco = row_number()) %>% filter(individuo=="01"|individuo=="1")
zon_alt%>%
arrange(individuo, año) %>% group_by(localidad,individuo,año) %>%
mutate(tronco = row_number()) #%>% filter(individuo=="01"|individuo=="1")
zon_alt <- zon_alt%>%
arrange(individuo, año) %>% group_by(localidad,individuo,año) %>%
mutate(tronco = row_number()) #%>% filter(individuo=="01"|individuo=="1")
View(zon_alt)
zon_alt <- zon_alt%>%
arrange(individuo, año) %>% group_by(localidad,individuo,año) %>%
mutate(tronco = row_number()) #%>% filter(individuo=="01"|individuo=="1")
zon_base <- zon_base%>%
arrange(individuo, año) %>% group_by(localidad,individuo,año) %>%
mutate(tronco = row_number()) #%>% filter(individuo=="01"|individuo=="1")
zon_dap <- zon_dap%>%
arrange(individuo, año) %>% group_by(localidad,individuo,año) %>%
mutate(tronco = row_number()) #%>% filter(individuo=="01"|individuo=="1")
View(zon_alt)
library(tidyr)
library(dplyr)
library(stringi)
library(stringr)
library(tidyverse)
files <- list.files("datos", pattern = ".csv", full.names = T)
zon_files <- files [str_detect(files, "zongolica")]
list <- list()
for (i in 1:length(zon_files)){
if (str_detect(zon_files[i],"2022")){
list[[i]] <- read.csv(zon_files[[i]], header = F)[,-1]
} else {
list[[i]] <- read.csv(zon_files[[i]], header = F)
}
list[[i]] <- list[[i]][-1,]
colnames(list[[i]]) <- tolower(c("Estado","Localidad" ,"Año","Individuo","Categoria","Base","DAP","Altura","Estatus"))
list[[i]] <-  list[[i]][, c("estado", "localidad", "año", "individuo", "categoria", "base", "dap", "altura", "estatus")]
}
list[[4]]
joined <- do.call(rbind,list)
joined <-  mutate(joined, altura=as.numeric(altura))
joined_errores <- joined %>% filter(str_detect(individuo, "="))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"508|17"),"17",individuo))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"360|411"),"360",individuo))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"657|406"),"406",individuo))
joined_errores <- unique(joined_errores)
joined <- rbind(joined, joined_errores)
joined <- joined %>% mutate(individuo = str_replace_all(individuo, "ZON", ""))%>%
mutate(individuo = if_else(!str_detect(individuo, "^ZON"),
if_else(as.numeric(individuo) < 100, paste0("0", individuo), individuo),
individuo))
joined <- joined %>%
separate_rows(c(altura, base, dap), sep = ",")) %>%
joined <- joined %>%
separate_rows(c(altura, base, dap), sep = ",") %>%
separate_rows(c(altura, base, dap), sep = "-")
joined <- joined %>%
separate_rows(c(altura, base, dap), sep = ",") %>%
separate_rows(c(altura, base, dap), sep = "-")
joined_separado<- joined %>%
separate_rows(c(altura, base, dap), sep = ",") %>%
separate_rows(c(altura, base, dap), sep = "-")
str(joined)
joined <- do.call(rbind,list)
joined <-  mutate_at(c("base","dap","altura"),as.numeric)
library(tidyr)
library(dplyr)
library(stringi)
library(stringr)
library(tidyverse)
files <- list.files("datos", pattern = ".csv", full.names = T)
zon_files <- files [str_detect(files, "zongolica")]
list <- list()
for (i in 1:length(zon_files)){
if (str_detect(zon_files[i],"2022")){
list[[i]] <- read.csv(zon_files[[i]], header = F)[,-1]
} else {
list[[i]] <- read.csv(zon_files[[i]], header = F)
}
list[[i]] <- list[[i]][-1,]
colnames(list[[i]]) <- tolower(c("Estado","Localidad" ,"Año","Individuo","Categoria","Base","DAP","Altura","Estatus"))
list[[i]] <-  list[[i]][, c("estado", "localidad", "año", "individuo", "categoria", "base", "dap", "altura", "estatus")]
}
list[[4]]
joined <- do.call(rbind,list)
joined <-  mutate_at(c("base","dap","altura"),as.numeric)
joined <- do.call(rbind,list)
joined <-  mutate(joined, altura=as.numeric(altura))
joined <-  mutate(joined, base=as.numeric(base))
joined <-  mutate(joined, dap=as.numeric(dap))
str(joined)
joined_errores <- joined %>% filter(str_detect(individuo, "="))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"508|17"),"17",individuo))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"360|411"),"360",individuo))
joined_errores <- joined_errores %>% mutate(individuo = ifelse(str_detect(individuo,"657|406"),"406",individuo))
joined_errores <- unique(joined_errores)
joined <- rbind(joined, joined_errores)
joined <- joined %>% mutate(individuo = str_replace_all(individuo, "ZON", ""))%>%
mutate(individuo = if_else(!str_detect(individuo, "^ZON"),
if_else(as.numeric(individuo) < 100, paste0("0", individuo), individuo),
individuo))
joined_separado <- joined %>%
separate_rows(c(altura, base, dap), sep = ",") %>%
separate_rows(c(altura, base, dap), sep = "-")
str(joined)
str(joined)
joined_separado <- joined %>%
separate_rows(c(altura, base, dap), sep = ",") %>%
separate_rows(c(altura, base, dap), sep = "-")
str(joined)
joined_separado <- joined %>%
separate_rows(altura, base, dap, sep = ",") %>%
separate_rows(altura, base, dap, sep = "-")
str(joined)
joined_separado <- joined %>%
separate_rows(altura, base, dap, sep = ",") %>%
separate_rows(altura, base, dap, sep = "-")
str(joined)
joined <- mutate_all(joined, as.character)
# Separar las filas
joined_separado <- joined %>%
separate_rows(altura, base, dap, sep = ",|-")
View(joined_separado)
View(joined)
View(joined)
library(tidyr)
library(dplyr)
library(stringi)
library(stringr)
library(tidyverse)
files <- list.files("datos", pattern = ".csv", full.names = T)
zon_files <- files [str_detect(files, "zongolica")]
list <- list()
for (i in 1:length(zon_files)){
if (str_detect(zon_files[i],"2022")){
list[[i]] <- read.csv(zon_files[[i]], header = F)[,-1]
} else {
list[[i]] <- read.csv(zon_files[[i]], header = F)
}
list[[i]] <- list[[i]][-1,]
colnames(list[[i]]) <- tolower(c("Estado","Localidad" ,"Año","Individuo","Categoria","Base","DAP","Altura","Estatus"))
list[[i]] <-  list[[i]][, c("estado", "localidad", "año", "individuo", "categoria", "base", "dap", "altura", "estatus")]
}
list[[4]]
View(joined)
joined <- do.call(rbind,list)
library(tidyverse)
files <- list.files("datos", pattern = ".csv", full.names = T)
zon_files <- files [str_detect(files, "zongolica")]
list <- list()
for (i in 1:length(zon_files)){
if (str_detect(zon_files[i],"2022")){
list[[i]] <- read.csv(zon_files[[i]], header = F)[,-1]
} else {
list[[i]] <- read.csv(zon_files[[i]], header = F)
}
list[[i]] <- list[[i]][-1,]
colnames(list[[i]]) <- tolower(c("Estado","Localidad" ,"Año","Individuo","Categoria","Base","DAP","Altura","Estatus"))
list[[i]] <-  list[[i]][, c("estado", "localidad", "año", "individuo", "categoria", "base", "dap", "altura", "estatus")]
}
list[[4]]
joined <- do.call(rbind,list)
joined <-  mutate(joined, altura=as.numeric(altura))
joined <-  mutate(joined, base=as.numeric(base))
joined <-  mutate(joined, dap=as.numeric(dap))
str(joined)
View(joined)
joined <- do.call(rbind,list)
View(joined)
joined <-  mutate(joined, altura=as.numeric(altura))
View(joined)
library(tidyverse)
files <- list.files("datos", pattern = ".csv", full.names = T)
zon_files <- files [str_detect(files, "zongolica")]
list <- list()
for (i in 1:length(zon_files)){
if (str_detect(zon_files[i],"2022")){
list[[i]] <- read.csv(zon_files[[i]], header = F)[,-1]
} else {
list[[i]] <- read.csv(zon_files[[i]], header = F)
}
list[[i]] <- list[[i]][-1,]
colnames(list[[i]]) <- tolower(c("Estado","Localidad" ,"Año","Individuo","Categoria","Base","DAP","Altura","Estatus"))
list[[i]] <-  list[[i]][, c("estado", "localidad", "año", "individuo", "categoria", "base", "dap", "altura", "estatus")]
}
list[[4]]
joined <- do.call(rbind,list)
#joined <-  mutate(joined, altura=as.numeric(altura))
#joined <-  mutate(joined, base=as.numeric(base))
#joined <-  mutate(joined, dap=as.numeric(dap))
str(joined)
str(joined)
joined <- mutate_all(joined, as.character)
# Separar las filas
joined_separado <- joined %>%
separate_rows(altura, base, dap, sep = ",|-")
View(joined_separado)
View(joined_separado)
